<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="EmojiStori" />
    <meta name="mobile-web-app-capable" content="yes" />
    <title>EmojiStori Generator</title>

    <!-- PWA Icons -->
    <link
      rel="apple-touch-icon"
      href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE4MCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxODAiIGhlaWdodD0iMTgwIiByeD0iNDAiIGZpbGw9InVybCgjZ3JhZGllbnQwX2xpbmVhcl8xXzEpIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9ImdyYWRpZW50MF9saW5lYXJfMV8xIiB4MT0iMCIgeTE9IjAiIHgyPSIxODAiIHkyPSIxODAiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iIzY2N2VlYSIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM3NjRiYTIiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8dGV4dCB4PSI5MCIgeT0iMTEwIiBmb250LXNpemU9IjcwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7inKg8L3RleHQ+Cjwvc3ZnPgo="
    />
    <link
      rel="manifest"
      href="data:application/json;base64,eyJuYW1lIjoiRW1vamlTdG9yaWVzIiwic2hvcnRfbmFtZSI6IkVtb2ppU3RvcmllcyIsInN0YXJ0X3VybCI6Ii4iLCJkaXNwbGF5Ijoic3RhbmRhbG9uZSIsImJhY2tncm91bmRfY29sb3IiOiIjNjY3ZWVhIiwidGhlbWVfY29sb3IiOiIjNjY3ZWVhIiwiaWNvbnMiOlt7InNyYyI6ImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjNhV1IwYUQwaU1UZ3dJaUJvWldsbmFIUTlJakU0TUNJaUlIWnBaWGRDYjNnOUlqQWdNQ0F4T0RBZ01UZ3dJaUJtYVd4c1BTSnViMjVsSWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpUGdvOGNtVmpkQ0IzYVdSMGFEMGlNVGd3SWlCb1pXbG5hSFE5SWpFNE1DSWlJSEo0UFNJME1DSWlJR1pwYkd3OUluVnliQ2dqY1hKaFpHbGxiblF3WDJ4cGJtVmhjbDl4TWpFcElpOCtDanhrWldaelBnbzliR2x1WldGeVIzSmhaR2xsYm5RZ2FXUTlJbWR5WVdScFpXNTBNRjlzYVc1bFlYSmZNVjh4SWlCNE1UMGlNQ0lnZVRFOUlqQWlJSGd4UFNJME1DSWlJSGt4UFNJME1DSWdaM0poWkdsbGJuUlZibWwwY3owaWRYTmxjbE53WVdObFQyNVZjMlVpUGdvOWMzUnZjQ0J6ZEc5d0xXTnZiRzl5UFNJak5qWTNaV1ZoSWk4K0NqeHpkRzl3SUc5bVpuTmxkRDBpTVNJZ2MzUnZjQzFqYjJ4dmNqMGlJemMyTkdKaE1pSXZQZ284TDJ4cGJtVmhja2R5WVdScFpXNTBQZ284TDJSbFpuTStDangwWlhoMElIZzlJamt3SWlCNVBTSXhNVEFpSUdadmJuUXRjMmw2WlQwaU56QWlJSFJsZUhRdFlXNWphRzl5UFNKdGFXUmtiR1VpUGpoYmFYa2JMM1JsZUhRK0Nqd3ZjM1puUGdvPSIsInNpemVzIjoiMTgweDE4MCIsInR5cGUiOiJpbWFnZS9zdmcreG1sIn1dfQ=="
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <div class="header-area">
        <button class="settings-btn" id="settingsBtn" title="Settings">
          ‚öôÔ∏è
        </button>
        <h1>‚ú® EmojiStories ‚ú®</h1>
      </div>

      <div class="input-area">
        <div class="input-section">
          <label for="emojiInput">Enter your emojis:</label>
          <textarea
            id="emojiInput"
            placeholder="üê∏üåüüè∞üëë..."
            inputmode="text"
          ></textarea>
          <div class="hint">
            Tap here and your emoji keyboard will appear on mobile! üì±
          </div>
        </div>

        <button id="generateBtn">Generate Story</button>

        <div class="loading" id="loading">
          <div>üé≠ Creating your magical story...</div>
        </div>
      </div>

      <div class="story-area">
        <div class="story-output" id="storyOutput">
          <h3>üìö Your Story:</h3>
          <div class="story-text" id="storyText"></div>
          <div class="story-controls">
            <button class="story-btn story-btn-primary" id="readAloudBtn">
              üîä Read Aloud
            </button>
            <button
              class="story-btn story-btn-secondary"
              id="stopReadingBtn"
              style="display: none"
            >
              ‚èπÔ∏è Stop
            </button>
            <button class="story-btn story-btn-secondary" id="voiceSettingsBtn">
              üé≠ Voice
            </button>
          </div>
        </div>
      </div>

      <div class="voice-controls" id="voiceControls">
        <label for="voiceSelect">Choose Voice:</label>
        <select id="voiceSelect" class="voice-select"></select>
        <label for="speedRange">Speed: <span id="speedValue">1.0x</span></label>
        <input
          type="range"
          id="speedRange"
          min="0.5"
          max="2"
          step="0.1"
          value="1"
          style="width: 100%"
        />
      </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title">‚öôÔ∏è Settings</h2>
          <button class="close-btn" id="closeModal">&times;</button>
        </div>

        <div class="tabs">
          <button class="tab-button active" id="audioTab">üîä Audio</button>
          <button class="tab-button" id="aiTab">ü§ñ AI</button>
        </div>

        <div class="tab-content active" id="audioContent">
          <div class="input-section" id="ttsProviderSection">
            <label>Text-to-Speech:</label>
            <div class="provider-selection">
              <label class="provider-option">
                <input
                  type="radio"
                  name="ttsProvider"
                  value="browser"
                  id="ttsBrowser"
                  checked
                />
                <span class="provider-label">Browser TTS</span>
              </label>
              <label class="provider-option" id="openaiTTSOption">
                <input
                  type="radio"
                  name="ttsProvider"
                  value="openai"
                  id="ttsOpenAI"
                />
                <span class="provider-label">OpenAI TTS</span>
                <span class="provider-status" id="openaiTTSStatus"></span>
              </label>
            </div>
          </div>

          <div class="input-section" id="settingsVoiceControls">
            <label for="settingsVoiceSelect">Choose Voice:</label>
            <select id="settingsVoiceSelect" class="voice-select"></select>
            <label for="settingsSpeedRange"
              >Speed: <span id="settingsSpeedValue">1.0x</span></label
            >
            <input
              type="range"
              id="settingsSpeedRange"
              min="0.5"
              max="2"
              step="0.1"
              value="1"
              style="width: 100%"
            />
          </div>
        </div>

        <div class="tab-content" id="aiContent">
          <div class="input-section">
            <label>Model Provider:</label>
            <div class="provider-selection">
              <label class="provider-option">
                <input
                  type="radio"
                  name="provider"
                  value="anthropic"
                  id="providerAnthropic"
                  checked
                />
                <span class="provider-label">Anthropic Claude</span>
                <span class="provider-status" id="anthropicStatus"></span>
              </label>
              <label class="provider-option">
                <input
                  type="radio"
                  name="provider"
                  value="openai"
                  id="providerOpenAI"
                />
                <span class="provider-label">OpenAI</span>
                <span class="provider-status" id="openaiStatus"></span>
              </label>
            </div>
          </div>

          <div class="input-section" id="anthropicKeySection">
            <label for="anthropicApiKeyInput">Anthropic API Key:</label>
            <div class="api-key-input-group">
              <input
                type="password"
                id="anthropicApiKeyInput"
                placeholder="sk-ant-..."
                autocomplete="off"
              />
              <button class="clear-key-btn" id="clearAnthropicKey" title="Clear Anthropic Key">
                √ó
              </button>
            </div>
          </div>

          <div
            class="input-section"
            id="openaiKeySection"
            style="display: none"
          >
            <label for="openaiApiKeyInput">OpenAI API Key:</label>
            <div class="api-key-input-group">
              <input
                type="password"
                id="openaiApiKeyInput"
                placeholder="sk-..."
                autocomplete="off"
              />
              <button class="clear-key-btn" id="clearOpenaiKey" title="Clear OpenAI Key">
                √ó
              </button>
            </div>
          </div>

          <div class="api-info" id="apiInfo">
            <p id="apiInfoText">
              You need an Anthropic API key to generate stories. Get yours at
              <a
                href="https://console.anthropic.com"
                target="_blank"
                id="apiInfoLink"
                >console.anthropic.com</a
              >
            </p>
          </div>
        </div>

        <div class="modal-actions">
          <button class="btn btn-primary" id="saveApiKeys">
            Save Settings
          </button>
        </div>
      </div>
    </div>

    <script src="kimoji.js"></script>
  </body>
</html>
