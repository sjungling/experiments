<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="EmojiStori" />
    <meta name="mobile-web-app-capable" content="yes" />
    <title>EmojiStori Generator</title>

    <!-- PWA Icons -->
    <link
      rel="apple-touch-icon"
      href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE4MCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxODAiIGhlaWdodD0iMTgwIiByeD0iNDAiIGZpbGw9InVybCgjZ3JhZGllbnQwX2xpbmVhcl8xXzEpIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9ImdyYWRpZW50MF9saW5lYXJfMV8xIiB4MT0iMCIgeTE9IjAiIHgyPSIxODAiIHkyPSIxODAiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iIzY2N2VlYSIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM3NjRiYTIiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8dGV4dCB4PSI5MCIgeT0iMTEwIiBmb250LXNpemU9IjcwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7inKg8L3RleHQ+Cjwvc3ZnPgo="
    />
    <link
      rel="manifest"
      href="data:application/json;base64,eyJuYW1lIjoiRW1vamkgU3RvcnkgR2VuZXJhdG9yIiwic2hvcnRfbmFtZSI6IkVtb2ppIFN0b3JpZXMiLCJzdGFydF91cmwiOiIuIiwiZGlzcGxheSI6InN0YW5kYWxvbmUiLCJiYWNrZ3JvdW5kX2NvbG9yIjoiIzY2N2VlYSIsInRoZW1lX2NvbG9yIjoiIzY2N2VlYSIsImljb25zIjpbeyJzcmMiOiJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlNVGd3SWlCb1pXbG5hSFE5SWpFNE1DSWlJSFpwWlhkQ2IzZzlJakFnTUNBeE9EQWdNVGd3SWlCbWFXeHNQU0p1YjI1bElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaVBnbzhjbVZqZENCM2FXUjBhRDBpTVRnd0lpQm9aV2xuYUhROUlqRTRNQ0lpSUhKNFBTSTBNQ0lpSUdacGJHdzlJblZ5YkNnamNYSmhaR2xsYm5Rd1gyeHBibVZoY2w5eE1qRXBJaTgrQ2p4a1pXWnpQZ285YkdsdVpXRnlSM0poWkdsbGJuUWdhV1E5SW1keVlXUnBaVzUwTUY5c2FXNWxZWEpmTVY4eElpQjRNVDBpTUNJZ2VURTlJakFpSUhneFBTSTBNQ0lpSUhreFBTSTBNQ0lnWjNKaFpHbGxiblJWYm1sMGN6MGlkWE5sY2xOd1lXTmxUMjVWYzJVaVBnbzljM1J2Y0NCemRHOXdMV052Ykc5eVBTSWpOalkzWldWaElpOCtDanh6ZEc5d0lHOW1abk5sZEQwaU1TSWdjM1J2Y0MxamIyeHZjajBpSXpjMk5HSmhNaUl2UGdvOEwyeHBibVZoY2tkeVlXUnBaVzUwUGdvOEwyUmxabk0rQ2p4MFpYaDBJSGc5SWprd0lpQjVQU0l4TVRBaUlHWnZiblF0YzJsNlpUMGlOekFpSUhSbGVIUXRZVzVqYUc5eVBTSnRhV1JrYkdVaVBqaGJhWGtiTDNSbGVIUStDand2YzNablBnbz0iLCJzaXplcyI6IjE4MHgxODAiLCJ0eXBlIjoiaW1hZ2Uvc3ZnK3htbCJ9XX0="
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <button class="settings-btn" id="settingsBtn" title="Settings">⚙️</button>

      <h1>✨ EmojiStori Generator ✨</h1>

      <div class="input-section">
        <label for="emojiInput">Enter your emojis:</label>
        <textarea
          id="emojiInput"
          placeholder="🐸🌟🏰👑..."
          inputmode="text"
        ></textarea>
        <div class="hint">
          Tap here and your emoji keyboard will appear on mobile! 📱
        </div>
      </div>

      <button id="generateBtn">Generate Story</button>

      <div class="loading" id="loading">
        <div>🎭 Creating your magical story...</div>
      </div>

      <div class="story-output" id="storyOutput">
        <h3>📚 Your Story:</h3>
        <div class="story-text" id="storyText"></div>
        <div class="story-controls">
          <button class="story-btn story-btn-primary" id="readAloudBtn">
            🔊 Read Aloud
          </button>
          <button
            class="story-btn story-btn-secondary"
            id="stopReadingBtn"
            style="display: none"
          >
            ⏹️ Stop
          </button>
          <button class="story-btn story-btn-secondary" id="voiceSettingsBtn">
            🎭 Voice
          </button>
        </div>
        <div class="voice-controls" id="voiceControls">
          <label for="voiceSelect">Choose Voice:</label>
          <select id="voiceSelect" class="voice-select"></select>
          <label for="speedRange"
            >Speed: <span id="speedValue">1.0x</span></label
          >
          <input
            type="range"
            id="speedRange"
            min="0.5"
            max="2"
            step="0.1"
            value="1"
            style="width: 100%"
          />
        </div>
      </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title">⚙️ Settings</h2>
          <button class="close-btn" id="closeModal">&times;</button>
        </div>

        <div class="api-info">
          <div style="margin-bottom: 10px">
            <span class="status-indicator" id="apiStatus"></span>
            <strong id="apiStatusText">API Key Required</strong>
          </div>
          <p>
            You need an Anthropic API key to generate stories. Get yours at
            <a href="https://console.anthropic.com" target="_blank"
              >console.anthropic.com</a
            >
          </p>
        </div>

        <div class="input-section">
          <label for="apiKeyInput">Anthropic API Key:</label>
          <input
            type="password"
            id="apiKeyInput"
            placeholder="sk-ant-..."
            autocomplete="off"
          />
        </div>
        <div class="input-section" id="settingsVoiceControls">
          <label for="settingsVoiceSelect">Choose Voice:</label>
          <select id="settingsVoiceSelect" class="voice-select"></select>
          <label for="settingsSpeedRange"
            >Speed: <span id="settingsSpeedValue">1.0x</span></label
          >
          <input
            type="range"
            id="settingsSpeedRange"
            min="0.5"
            max="2"
            step="0.1"
            value="1"
            style="width: 100%"
          />
        </div>

        <div class="modal-actions">
          <button class="btn btn-secondary" id="clearApiKey">Clear Key</button>
          <button class="btn btn-primary" id="saveApiKey">Save Key</button>
        </div>
      </div>
    </div>

    <script src="kimoji.js"></script>
  </body>
</html>
